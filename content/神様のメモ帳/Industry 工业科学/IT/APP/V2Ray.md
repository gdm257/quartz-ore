---
tags:
    - Label/Industry-å·¥ä¸šç§‘å­¦/IT/APP/Command/CLI
    - flag/APP/Network
---

## V2Ray

[Project V](https://www.v2ray.com/)

[UUID Generator](https://www.uuidgenerator.net/)

[v2rayçš„æ¨¡æ¿ä»¬](https://github.com/KiriKira/vTemplate)

[V2Ray é…ç½®ç”Ÿæˆå™¨](https://intmainreturn0.com/v2ray-config-gen/)

[VeekXT | æ”¯æŒ 4.x ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶ç”Ÿæˆå™¨](https://www.veekxt.com/utils/v2ray_gen)

[Ping and TCP port check æµ‹è¯•ç½‘ç«™ æ¬ç“¦å·¥å‡ºå“](http://ping.pe/)

[æ¨èä½¿ç”¨çš„å‡ ç§ç»„åˆçš„ä¼ è¾“é€Ÿç‡å¯¹æ¯” v2ray-doc/v2ray speed test v4.27.2.md at master Â· badO1a5A90/v2ray-doc](https://github.com/badO1a5A90/v2ray-doc/blob/master/v2ray%20speed%20test%20v4.27.2.md)

[ä»€ä¹ˆæ˜¯ä¸­ç»§/ä¸­è½¬èŠ‚ç‚¹ï¼Ÿä»¥åŠä¸­ç»§èŠ‚ç‚¹çš„æ¶æ„ç‰¹ç‚¹å’Œä½œç”¨ - DuyaoSS-æœºåœºæµ‹é€Ÿå’Œç®€ä»‹](https://www.duyaoss.com/archives/2741/)

[é«˜çº§è·¯ç”±è®¾ç½® | Qv2ray](https://qv2ray.net/manual/route.html#%E5%85%A8%E5%B1%80%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99)

[Routing è·¯ç”± | V2Fly.org](https://www.v2fly.org/config/routing.html)

[Hackl0us/GeoIP2-CN: æœ€å°å·§ã€æœ€å‡†ç¡®ã€æœ€å…¨é¢ã€æœ€å®ç”¨çš„ä¸­å›½å¤§é™† GeoIP2 æ•°æ®åº“åŠ IP åœ°å€æ®µ](https://github.com/Hackl0us/GeoIP2-CN)

[alecthw/mmdb_china_ip_list: Geoip MaxMind Database for china ip list! This is also an example of generating MaxMind Database!](https://github.com/alecthw/mmdb_china_ip_list)

[Loyalsoldier/v2ray-rules-dat: ğŸ¦„ ğŸƒ ğŸ‘» V2Ray è·¯ç”±è§„åˆ™æ–‡ä»¶åŠ å¼ºç‰ˆï¼Œå¯ä»£æ›¿å®˜æ–¹ geoip.dat å’Œ geosite.dat è§„åˆ™æ–‡ä»¶ï¼Œå…¼å®¹ Trojan-Goã€‚Enhanced edition of V2Ray rules dat files, compatible with Trojan-Go.](https://github.com/Loyalsoldier/v2ray-rules-dat)

[v2fly/domain-list-community: Community managed domain list. Generate geosite.dat for V2Ray.](https://github.com/v2fly/domain-list-community)

[ACL4SSR/ACL4SSR at master](https://github.com/ACL4SSR/ACL4SSR/tree/master)

[Loyalsoldier/clash-rules: ğŸ¦„ï¸ ğŸƒ ğŸ‘» Clash Premium è§„åˆ™é›†(RULE-SET)ã€‚](https://github.com/Loyalsoldier/clash-rules)

[sherpya/geolite2legacy: MaxMind GeoLite2 (CSV) to Legacy format converter](https://github.com/sherpya/geolite2legacy)

[é…ç½®æ–‡ä»¶é¢„å¤„ç† Â· Clash for Windows](https://docs.cfw.lbyczf.com/contents/parser.html)

[Clash for Windows è‡ªå®šä¹‰è§„åˆ™æ•´åˆ - iBug](https://ibug.io/cn/2020/07/clash-for-windows-custom-rules/)

[æ–°ç‰ˆCFWåˆ©ç”¨Parseræˆ–MixinåŠŸèƒ½ï¼Œæ”¯æŒæ—§æ ¼å¼Clashé…ç½®æ–‡ä»¶ Â· Issue #1092 Â· Fndroid/clash_for_windows_pkg](https://github.com/Fndroid/clash_for_windows_pkg/issues/1092)

[V0.11.5 æ— æ³•è·å–policieså’Œrulesï¼Œåœ¨0.9.5çš„ç‰ˆæœ¬ä»¥åŠ0.8.4ç‰ˆæœ¬éƒ½å¯ä»¥ã€‚ Â· Issue #1072 Â· Fndroid/clash_for_windows_pkg](https://github.com/Fndroid/clash_for_windows_pkg/issues/1072)

[ç”µä¿¡/è”é€š/ç§»åŠ¨ï¼Ÿå›½å†…ä¸»æµè¿è¥å•†å›½é™…çº¿è·¯æµ…è°ˆ-Puresysçº¯å‡€ç³»ç»Ÿ-è½¯ä»¶ä¸‹è½½](https://www.puresys.net/3707.html)

[èŠèŠTun é€æ˜ä»£ç†çš„å¤šç§å®ç°æ–¹å¼ï¼Œä»¥åŠå¦‚ä½•é¿å… routing loop | èƒ–æˆç…¤æ°”ç½](https://www.chaochaogege.com/2021/08/01/57/)

[Ubuntuã€Œä¸€é”®ã€è®¾ç½®ä»£ç† | Sukka's Blog](https://blog.skk.moe/post/enable-proxy-on-ubuntu/)

[njzydark/Mellow: A V2Ray client with TUN support.](https://github.com/njzydark/Mellow)

[Quantumult X å°ç™½ç³»åˆ—æ•™ç¨‹ Â· erdongchanyo/Rules](https://github.com/erdongchanyo/Rules/tree/main/Quantumult%20X)



### ç®¡ç†

å®‰è£…ï¼š
wget https://install.direct/go.sh
sudo bash go.sh
sudo bash go.sh -f # å¼ºåˆ¶é‡è£…
bash go.sh -h # æŸ¥çœ‹å¸®åŠ©

æ— è®ºæ˜¯ VPS è¿˜æ˜¯ä¸ªäººç”µè„‘ï¼Œæ—¶åŒºæ˜¯ä»€ä¹ˆæ— æ‰€è°“ï¼Œå› ä¸º V2Ray ä¼šè‡ªåŠ¨è½¬æ¢æ—¶åŒºï¼Œä½†æ˜¯æ—¶é—´ä¸€å®šè¦å‡†ç¡®ã€‚

å¦‚æœä½ çš„æœåŠ¡å™¨æ¶æ„æ˜¯ OpenVZï¼Œé‚£ä¹ˆä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤æœ‰å¯èƒ½ä¿®æ”¹ä¸äº†æ—¶é—´ï¼Œç›´æ¥å‘å·¥å•è”ç³» VPS æä¾›å•†çš„å®¢æœå§ï¼Œå°±è¯´ä½ åœ¨ VPS ä¸Šè¿è¡Œçš„æœåŠ¡å¯¹æ—¶é—´æœ‰è¦æ±‚ï¼Œè¦ä»–ä»¬æä¾›å¯è¡Œçš„ä¿®æ”¹ç³»ç»Ÿæ—¶é—´çš„æ–¹æ³•ã€‚

ä½¿ç”¨ WebSocket æ˜¯å› ä¸ºæ­é… Nginx / Caddy / Apache åªèƒ½ç”¨ WebSocketï¼Œä½¿ç”¨ TLS æ˜¯å› ä¸ºå¯ä»¥æµé‡åŠ å¯†ï¼Œçœ‹èµ·æ¥æ›´åƒ HTTPSã€‚

docker ä¸ ç›´æ¥å®‰è£…çš„ç›®å½•ä¸€æ ·ï¼š
/usr/bin/v2ray/v2rayï¼šV2Ray ä¸»ç¨‹åºï¼›
/usr/bin/v2ray/v2ctlï¼šV2Ray å·¥å…·ï¼Œå¾ˆå°‘ç”¨ï¼›
/etc/v2ray/config.jsonï¼šé…ç½®æ–‡ä»¶ï¼›
/usr/bin/v2ray/geoip.datï¼šIP æ•°æ®æ–‡ä»¶
/usr/bin/v2ray/geosite.datï¼šåŸŸåæ•°æ®æ–‡ä»¶


æµ‹è¯•é…ç½®æ–‡ä»¶
v2ray -test


å¯åŠ¨
v2ray --config=/etc/v2ray/config.json
v2ray -config /etc/v2ray/config.json
æˆ–è€…ç”¨ systemd ç­‰å·¥å…·æŠŠ V2Ray ä½œä¸ºæœåŠ¡åœ¨åå°è¿è¡Œ



### åè®®


V2Ray å“ªä¸ªåè®®å¥½

æ²¡å•¥éœ€æ±‚å°±ç”¨ TCP
è¿½æ±‚æ›´åŠ å®‰å…¨å°±ç”¨ WS + TLSï¼Œæœ‰åŸŸåå°±è¡Œ
ISP å¤šä½œæ€ªç”¨åŠ¨æ€ç«¯å£
å°é¸¡ç½‘ç»œä¸å¥½å°±ç”¨ mKCP mkcpä¼°è®¡æ°¸è¿œå‡‰äº† ä»¥å‰ç”¨çš„æ—¶å€™çœŸå¿«


**é€Ÿåº¦ä¼˜å…ˆ**ï¼šVMess åè®®ã€mKCP åè®®ã€Mux.Cool åè®®ï¼Œå†…éƒ¨è·¯ç”±åˆ†æµ
**éšç§ä¼˜å…ˆ**ï¼šTLS (å®Œæ•´å®ç°ï¼Œéä¼ªè£…)
**ç¨³å®šä¼˜å…ˆ**ï¼šHTTP ä¼ªè£…ã€BT ä¼ªè£…ç­‰ï¼Œä»¥åŠ Mux.Cool åè®®ã€‚

V2Ray åœ¨è®¾è®¡æ—¶å·²è€ƒè™‘åˆ°å¤šä¸ªåŠŸèƒ½ç›¸äº’ç»„åˆçš„ä½¿ç”¨ï¼Œæ¯”å¦‚ä½ å¯ä»¥ä½¿ç”¨ VMess + TLS æ¥è¾¾åˆ°éšç§å’Œé€Ÿåº¦çš„åŒé‡ä¿è¯ï¼Œæˆ–è€…ä½¿ç”¨ VMess + Mux æ¥æå‡é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚ä¹Ÿè€ƒè™‘åˆ°ä¸åŒçš„ç”¨æˆ·çš„éœ€æ±‚ä¸åŒï¼ŒV2Ray çš„æ‰€æœ‰åŠŸèƒ½éƒ½å¯ä»¥é€‰æ‹©æ‰“å¼€æˆ–å…³é—­ï¼Œä¸ä¼šæŠŠä»»ä½•ä¸€ä¸ªåŠŸèƒ½å¼ºåŠ ç»™ç”¨æˆ·ã€‚ä¸åŒçš„é…ç½®å¯ä»¥è¾¾åˆ°ä¸åŒçš„æ•ˆæœï¼Œè€Œåœ¨ V2Ray ä¸­ï¼Œä½ åªéœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶å°±å¯ä»¥åº”å¯¹è¿™äº›ä¸åŒçš„éœ€æ±‚ã€‚




åˆ†æä¸€ä¸ªè½¯ä»¶æ˜¯å¦å®‰å…¨çš„è¿‡ç¨‹ç§°ä¸ºâ€œThreat modelingâ€
ä¸€ä¸ªä»£ç†ï¼ˆç¿»å¢™ï¼‰åè®®å¯èƒ½å…·å¤‡çš„ä¸‰è¦ç´ ã€‚ä»»ä½•ä¸€ä¸ªç¿»å¢™åè®®éƒ½å…·å¤‡ä»¥ä¸Šä¸‰è¦ç´ ä¸­çš„å‡ ä¸ªæˆ–å…¨éƒ¨ã€‚
ä¸€ã€ä¼ è¾“ï¼šèƒ½åœ¨ Aã€B ä¸¤ä¸ªä¸»æœºä¹‹é—´å»ºç«‹ä¸€æ¡å®‰å…¨å¯é çš„é€šä¿¡é€šé“ï¼Œç”¨äºä¼ è¾“æ•°æ®ï¼›
äºŒã€åè®®ï¼šå¯¹äºå°†è¦ä¼ è¾“çš„æ•°æ®ï¼Œèƒ½å°†è¿™äº›æ•°æ®çš„ç›®çš„åœ°å‘ŠçŸ¥ä»£ç†æœåŠ¡å™¨ï¼›
ä¸‰ã€å†…å®¹ï¼šå¯ä»¥å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚å‹ç¼©ã€åˆå¹¶ç­‰ã€‚


é¡ºä¾¿æ•´ç†ä¸€ä¸‹å¸¸ç”¨åè®®æ‰€å…·å¤‡çš„è¦ç´ ï¼Œä»…ä¾›å‚è€ƒï¼š

- HTTP/1.1: åè®®

- HTTP/2 (ä¸å¸¦ TLS): åè®®+å†…å®¹

- TLS: ä¼ è¾“

- Shadowsocks: ä¼ è¾“+åè®®ã€‚AEAD åªæ˜¯å¼ºåŒ–äº†ä¼ è¾“ï¼Œå¹¶æ²¡æœ‰æ·»åŠ æ–°çš„è¦ç´ ã€‚

- ShadowsocksR: ä¼ è¾“+åè®®

- KcpTun: ä¼ è¾“+å†…å®¹

- [GoProxy](https://github.com/phuslu/goproxy "This link will take you away from steemit.com"): ç­‰ä»·äº HTTP/2 + TLSï¼Œå³ä¼ è¾“+åè®®+å†…å®¹

- VMess (V2Ray): ä¼ è¾“+åè®®

- mKCP (V2Ray): ä¼ è¾“

- WebSocket (V2Ray): ä¼ è¾“

- Mux (V2Ray): åè®®+å†…å®¹

ws tcp è¿˜æ˜¯æ¨èchacha20  å› ä¸ºé˜²ç«å¢™è¿å¤§ä¼ä¸šçš„åˆæ³•vpn å› ä¸ºç”¨äº†AES ä¹Ÿå° aes è¿™ä¸ªæœ‰ç‰¹å¾äº†ã€‚å•åŠ å¯†æ€§èƒ½ä¸Šè®² æ‰‹æœºç«¯chacha x86 pcç«¯ aesã€‚ä¸ï¼Œåªè¦æ‰‹æœºCPUæ”¯æŒAESç¡¬è§£ï¼Œé€Ÿåº¦å°±å¿«ã€‚armv8éƒ½æ”¯æŒchacha20 auth_aes128_md5



### VLESS

æ€»ä¹‹ä¸€å¥è¯ï¼Œç­‰ v2fly clash subconverter å®Œå–„ vless äº†ï¼Œå°±æŠŠ Vmess on WS with TLS (Nginx) æ¢æˆ Vless on WS with TLS (Nginx) å°±æ˜¯äº†ï¼Œä¼šæœ‰ä¸€ä¸¤æˆé€Ÿåº¦çš„æå‡ï¼Œå¦‚æœè¿˜åœ¨ç”¨ Vmessï¼Œå°±ä¸è¦åŠ å¯†ï¼ˆåˆ«é€‰ auto aes-128-gcm chacha20-poly1305ï¼‰ï¼Œå› ä¸ºå¥—äº† TLS ä¹‹ååŠ å¯†æ²¡æ„ä¹‰ã€‚

### XTLS

æœ€è¿‘ v2flay 4.29 æ›´æ–°äº†ä¸€ä¸ªé»‘ç§‘æŠ€ XTLSï¼Œè¯´æ˜¯èƒ½è®©ç¡¬è·¯ç”±å¤§å¹…æå‡é€Ÿåº¦ç”šè‡³ç¿»å€ï¼Œæˆ‘å¿ƒé‡Œä¸€æƒŠï¼Œè®¨è®ºç¾¤ä¸€ç¿»ï¼Œè¯´æ˜¯ä»€ä¹ˆç¼åˆ TLSã€å†…å±‚ TLSã€å¤–å±‚ TLS balabalaï¼Œæ€»ä¹‹æ„£æ˜¯æ²¡æŠŠåŸç†çœ‹æ˜ç™½ã€‚äºæ˜¯ä¸Šç½‘æœäº†å‡ ç¯‡åšæ–‡ï¼Œä¸€çœ‹ï¼Œå—¨ï¼Œæœ¬è´¨ä¸å°±æ˜¯æŠŠ v2ray server å½“ä½œ NAT å˜›ï¼Œè¿˜åš·åš·ç€ä»€ä¹ˆ the futureï¼Œè¿˜ä»¥ä¸ºå¤šå¤§ç‰›é€¼å‘¢ã€‚æ€»ä¹‹å…ˆæ‘˜æŠ„ä¸€æ®µï¼š

å½“æˆ‘ä»¬ä½¿ç”¨åŸºäº TLS çš„ä»£ç†æµè§ˆ HTTPS ç½‘ç«™ã€åˆ·æ‰‹æœº APP æ—¶ï¼Œå…¶å®æ˜¯ä¸¤å±‚ TLSï¼šå¤–å±‚æ˜¯ä»£ç†çš„ TLSï¼Œå†…å±‚æ˜¯ç½‘ç«™ã€APP çš„ TLSã€‚

XTLS åšäº†ä»€ä¹ˆï¼Ÿ
ä»ç¬¬äºŒä¸ªå†…å±‚ TLS data record å¼€å§‹ï¼Œæ•°æ®ä¸äºŒæ¬¡åŠ è§£å¯†ï¼Œç›´æ¥è½¬å‘ï¼Œä¸”ä»å¤–é¢çœ‹è¿˜æ˜¯ä¸€æ¡è¿è´¯çš„æ™®é€š TLSã€‚
Write å’Œ Read å¦¥å–„å¤„ç†éé¢„æœŸæ•°æ®å’Œä¸­é—´äººæ”»å‡»ç­‰ï¼Œå¯¹ä»»ä½•å¹²æ‰°çš„ååº”ä¸æ™®é€š TLS è¡¨ç°ä¸€è‡´ã€‚
æœåŠ¡ç«¯æ— æ³•è¢«ä¸»åŠ¨æ¢æµ‹å‡ºå·®å¼‚ï¼šVLESS åœ¨éªŒè¯ UUIDã€è¯¥ç”¨æˆ·è¯·æ±‚ä¸”å¯ä»¥ç”¨ XTLS åæ‰ä¼šå¼€å¯å®ƒçš„ç‰¹æ®ŠåŠŸèƒ½ã€‚
è¿™ä¸ªé»‘ç§‘æŠ€çš„æ•ˆæœï¼Ÿ
1.å…¶å® XTLS å°±æ˜¯æ— ç¼æ‹¼æ¥äº†ä¸¤æ¡è´§çœŸä»·å®çš„ TLSï¼Œå› æ­¤ç»å¤§å¤šæ•°æµé‡æ— éœ€äºŒæ¬¡åŠ è§£å¯†äº†ï¼ˆå®‰å…¨ä»£ç†ä¸­æ€§èƒ½æœ€å¼ºï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚
2.å¯¹è·¯ç”±å™¨ã€æœåŠ¡å™¨ç­‰ä¸­é—´è®¾å¤‡ç‰¹åˆ«å‹å¥½ï¼šé™ä½äº† 90% ä»¥ä¸Šçš„åŠ è§£å¯†å¼€é”€ï¼Œå‡ ä¹åªå‰©æµé‡è½¬å‘ã€‚å¯¹äºæ‰‹æœºï¼Œåˆ™æ˜¯å‡å°‘è€—ç”µã€‚
3.é“¾å¼ä»£ç†çš„é©å‘½ï¼šå³ä½¿å¤šä¸ª XTLS åµŒå¥—ï¼Œç»å¤§å¤šæ•°æµé‡ä¹Ÿå§‹ç»ˆåªéœ€åŠ è§£å¯†ä¸€æ¬¡ï¼ˆç±»ä¼¼ TOR çš„ç½‘ç»œåº”è¯¥éå¸¸éœ€è¦ XTLSï¼‰ã€‚

VLESS + XTLS å¯¹äºç¡¬è·¯ç”±ç­‰æ— AESç¡¬è§£è®¾å¤‡ï¼Œä¼šæœ‰ç½‘é€Ÿç¿»å€æˆ–CPUä½¿ç”¨ç‡å‡åŠç­‰å¥‡æ•ˆã€‚

è¿™å’Œ NAT æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæœç„¶ç§‘æŠ€ä»¥èµ·åä¸ºæœ¬ã€‚è¿˜è¯´ä»€ä¹ˆ the futureï¼ŒXTLS å°±æ˜¯æ‹¿æ¥ç»™ä»£ç†ç”¨çš„ï¼Œæ­£å¸¸äººç›´æ¥å°±ä¸ server å»ºç«‹ TLS è¿æ¥äº†ï¼Œå“ªæœ‰æä¸ªè·Ÿ v2ray é“¾å¼èŠ‚ç‚¹ä¸€æ ·çš„éœ€æ±‚ï¼Ÿ

### vmess:// é“¾æ¥

`vmess://xxxxxx`

Qv2ray ç”Ÿæˆçš„é“¾æ¥ä¸å¤Ÿæ ‡å‡†ï¼Œå»ºè®®ç”¨ V2rayN ç”Ÿæˆã€‚

### v2rayN

åœ°å€ï¼šng.lolineko.com
åè®®ï¼šws
ä¼ªè£…ç±»å‹ï¼šnone
**ä¼ªè£…åŸŸåï¼šä¸å¡«**
**è·¯å¾„ï¼š/nekopoi-cdn**
**åº•å±‚ä¼ è¾“å®‰å…¨ï¼štls**
allowInsecureï¼šé»˜è®¤ true
alterldï¼šæ¨è 6ï¼Œæ•°å€¼è®¾ç½®æˆå®¢æˆ·ç«¯å°äºç­‰äºæœåŠ¡ç«¯å³å¯ï¼Œè¶Šå¤§è¶Šå æœåŠ¡å™¨å†…å­˜

### conf.json

conf.json å¯ç”¨é…ç½®å…¨è§ˆï¼š
{
  "log": {},    //å»ºè®®ä½¿ç”¨
  "api": {},        //å†…ç½®çš„è¿œç¨‹æ§ç½® API
  "dns": {},    //å†…ç½®çš„ DNS æœåŠ¡å™¨
  "stats": {},    //å½“æ­¤é¡¹å­˜åœ¨æ—¶ï¼Œå¼€å¯ç»Ÿè®¡ä¿¡æ¯
  "routing": {},    //è·¯ç”±
  "policy": {},    //æœ¬åœ°ç­–ç•¥
  "reverse": {},    //åå‘ä»£ç†
  "inbounds": [],    //å…¥ç«™åè®®
  "outbounds": [],    //å‡ºç«™åè®®
  "transport": {}    //å¦‚ä½•ä¸å…¶ä»–æœåŠ¡å™¨å»ºç«‹ç½‘ç»œè¿æ¥
}

### outbounds åˆ†æµ

"AsIs": åªä½¿ç”¨åŸŸåè¿›è¡Œè·¯ç”±é€‰æ‹©ã€‚é»˜è®¤å€¼ã€‚
"IPIfNonMatch": å½“åŸŸåæ²¡æœ‰åŒ¹é…ä»»ä½•è§„åˆ™æ—¶ï¼Œå°†åŸŸåè§£ææˆ IPï¼ˆA è®°å½•æˆ– AAAA è®°å½•ï¼‰å†æ¬¡è¿›è¡ŒåŒ¹é…ï¼›
    å½“ä¸€ä¸ªåŸŸåæœ‰å¤šä¸ª A è®°å½•æ—¶ï¼Œä¼šå°è¯•åŒ¹é…æ‰€æœ‰çš„ A è®°å½•ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªä¸æŸä¸ªè§„åˆ™åŒ¹é…ä¸ºæ­¢ï¼›
    è§£æåçš„ IP ä»…åœ¨è·¯ç”±é€‰æ‹©æ—¶èµ·ä½œç”¨ï¼Œè½¬å‘çš„æ•°æ®åŒ…ä¸­ä¾ç„¶ä½¿ç”¨åŸå§‹åŸŸåï¼›
"IPOnDemand": å½“åŒ¹é…æ—¶ç¢°åˆ°ä»»ä½•åŸºäº IP çš„è§„åˆ™ï¼Œå°†åŸŸåç«‹å³è§£æä¸º IP è¿›è¡ŒåŒ¹é…ï¼›

```json
  "outbounds": [
    {
      "tag": "proxy",
      "protocol": "vmess",
      "settings": {
        "vnext": [
          {
            "address": "your.web.site",
            "port": 443,
            "users": [
              {
                "id": "******-***-***-***-***************",
                "alterId": 64,
                "email": "you@your.web.site",
                "security": "auto"
              }
            ]
          }
        ],
        "servers": null,
        "response": null
      },
      "streamSettings": {
        "network": "ws",
        "security": "tls",
        "tlsSettings": {
          "allowInsecure": true,
          "serverName": null
        },
        "tcpSettings": null,
        "kcpSettings": null,
        "wsSettings": {
          "connectionReuse": true,
          "path": "/youpath",
          "headers": null
        },
        "httpSettings": null,
        "quicSettings": null
      },
      "mux": {
        "enabled": true,
        "concurrency": 8
      }
    },
    {
      "tag": "direct",
      "protocol": "freedom",
      "settings": {
        "vnext": null,
        "servers": null,
        "response": null
      },
      "streamSettings": null,
      "mux": null
    },
    {
      "tag": "block",
      "protocol": "blackhole",
      "settings": {
        "vnext": null,
        "servers": null,
        "response": {
          "type": "http"
        }
      },
      "streamSettings": null,
      "mux": null
    }
  ],
```

### Nginx ç«™ç‚¹é…ç½®

```nginx
    # åŸºç¡€éƒ¨åˆ†
    listen 443 ssl;
    listen [::]:443 ssl; #IPv6
    root /home/test/wwwroot/hacg.monster;
    index index.html index.htm index.nginx-debian.html;
    server_name hacg.monster;


    # ssl éƒ¨åˆ†
    ssl on; #æ…ç”¨ï¼Œä¼šè®© typecho å¤±æ•ˆ
    ssl_certificate /usr/local/nginx/conf/ssl/hacg.monster/fullchain.cer;
    ssl_certificate_key /usr/local/nginx/conf/ssl/hacg.monster/hacg.monster.key;
    ssl_protocols         TLSv1.2 TLSv1.3;
    #ç‰ˆæœ¬1 ssl_ciphers           HIGH:!aNULL:!MD5;
    ssl_ciphers           ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
  ssl_session_timeout 1d; #ä¸éœ€è¦
  ssl_session_cache shared:MozSSL:10m; #ä¸éœ€è¦
  ssl_session_tickets off; #ä¸éœ€è¦
  ssl_prefer_server_ciphers off; #ä¸éœ€è¦


    # v2ray start
    location /nekopoi {

      #é ws è¯·æ±‚è¿”å› 404
      if ($http_upgrade != "websocket") { # WebSocketåå•†å¤±è´¥æ—¶è¿”å›404
          return 404;
      }

      proxy_redirect off;
      proxy_pass http://v2ray:4552;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
      proxy_set_header Host $host;

      # Show real IP in v2ray access.log
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    #v2ray end



        #å®‰å…¨æ€§ location start

        #æ­£åˆ™åŒ¹é… jpg ç­‰åç¼€
        location  .*\.(gif|jpg|jpeg|png|bmp|swf)$
        {
            expires      30d;
        }


        #æ­£åˆ™åŒ¹é… jsã€css
        location  .*\.(js|css)?$
        {
            expires      12h;
        }


        #æ­£åˆ™åŒ¹é… å¸¦æœ‰ /.well-known çš„è·¯å¾„ï¼ˆè¯ä¹¦éªŒè¯ï¼‰
        location  /.well-known
        {
            allow all;
        }


        #æ­£åˆ™åŒ¹é… å¸¦æœ‰ /. çš„è·¯å¾„ï¼ˆå®‰å…¨æ€§ï¼‰
        location  /\.
        {
            deny all;
        }

        # location end

```


### Nginx å†›å“¥ä¸»é…ç½®

```
# Nginx é»˜è®¤é…ç½® /usr/local/nginx/conf/nginx.conf
user  www www;

worker_processes auto;
worker_cpu_affinity auto;

error_log  /home/wwwlogs/nginx_error.log  crit;

pid        /usr/local/nginx/logs/nginx.pid;

#Specifies the value for maximum file descriptors that can be opened by this process.
worker_rlimit_nofile 51200;

events
    {
        use epoll;
        worker_connections 51200;
        multi_accept off;
        accept_mutex off;
    }

http
    {
        include       mime.types;
        default_type  application/octet-stream;

        server_names_hash_bucket_size 128;
        client_header_buffer_size 32k;
        large_client_header_buffers 4 32k;
        client_max_body_size 50m;

        sendfile on;
        sendfile_max_chunk 512k;
        tcp_nopush on;

        keepalive_timeout 60;

        tcp_nodelay on;

        fastcgi_connect_timeout 300;
        fastcgi_send_timeout 300;
        fastcgi_read_timeout 300;
        fastcgi_buffer_size 64k;
        fastcgi_buffers 4 64k;
        fastcgi_busy_buffers_size 128k;
        fastcgi_temp_file_write_size 256k;

        gzip on;
        gzip_min_length  1k;
        gzip_buffers     4 16k;
        gzip_http_version 1.1;
        gzip_comp_level 2;
        gzip_types     text/plain application/javascript application/x-javascript text/javascript text/css application/xml application/xml+rss;
        gzip_vary on;
        gzip_proxied   expired no-cache no-store private auth;
        gzip_disable   "MSIE [1-6]\.";

        #limit_conn_zone $binary_remote_addr zone=perip:10m;
        ##If enable limit_conn_zone,add "limit_conn perip 10;" to server section.

        server_tokens off;
        access_log off;

server
    {
        listen 80 default_server reuseport;
        #listen [::]:80 default_server ipv6only=on;
        server_name _;
        index index.html index.htm index.php;
        root  /home/wwwroot/default;

        #error_page   404   /404.html;

        # Deny access to PHP files in specific directory
        #location  /(wp-content|uploads|wp-includes|images)/.*\.php$ { deny all; }

        include enable-php.conf;

        location /nginx_status
        {
            stub_status on;
            access_log   off;
        }

        location  .*\.(gif|jpg|jpeg|png|bmp|swf)$
        {
            expires      30d;
        }

        location  .*\.(js|css)?$
        {
            expires      12h;
        }

        location  /.well-known {
            allow all;
        }

        location  /\.
        {
            deny all;
        }

        access_log  /home/wwwlogs/access.log;
    }
include vhost/*.conf; #å¼•ç”¨ vhost æ–‡ä»¶å¤¹é‡Œçš„æ‰€æœ‰ .conf æ–‡ä»¶çš„ä»£ç 
}

```

###  v2rayçš„TLSæµé‡å¯è¢«ç®€å•ç‰¹å¾ç åŒ¹é…ç²¾å‡†è¯†åˆ«ï¼ˆé™„PoC) #704 

[v2rayçš„TLSæµé‡å¯è¢«ç®€å•ç‰¹å¾ç åŒ¹é…ç²¾å‡†è¯†åˆ«ï¼ˆé™„PoC) Â· Issue #704 Â· v2ray/discussion](https://github.com/v2ray/discussion/issues/704)

PC æ–¹æ¡ˆ 1ï¼šå°† v2ray-core æ›´æ–°è‡³ 4.23.2 åŠä»¥ä¸Š
PC æ–¹æ¡ˆ 2ï¼šé…ç½®å®¢æˆ·ç«¯ outbound - streamSettings - tlssettings - AllowInsecureCiphers = false
Android æ–¹æ¡ˆ 1ï¼šé…ç½®å®¢æˆ·ç«¯ outbound - streamSettings - tlssettings - AllowInsecureCiphers = false
Android æ–¹æ¡ˆ 2ï¼šåç­‰ä½œè€…æ›´æ–°å†…æ ¸

æ­¤æ¬¡é—®é¢˜çš„ä¸¥é‡æ€§åœ¨äºè¯¥å¼ºç‰¹å¾å®Œå…¨ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨æ˜¯æ— æ³•æ§åˆ¶çš„ï¼Œå¦‚æœä¸è§£å†³ï¼Œå¯èƒ½ææ­»ä¸€å¤§æ‰¹æœºåœºï¼Œæˆ–è€…è¿«ä½¿æœºåœºç¦ç”¨ v2ray çš„ tlsã€‚

ä¸ä½¿ç”¨v2rayçš„tlså°±ä¸å—å½±å“ï¼Œä½†æœ¬äººä½¿ç”¨çš„ wss æ˜¯å—å½±å“çš„ã€‚


### DNS

æ”¯æŒ IPã€åŸŸåã€DoHï¼Œä¸æ”¯æŒ DoTã€‚
