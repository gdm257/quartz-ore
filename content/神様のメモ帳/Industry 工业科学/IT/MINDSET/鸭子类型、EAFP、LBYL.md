---
tags:
- Label/Article/Industry-工业科学/IT/LANGUAGE
---

[Python 类型系统与类型检查（翻译） - muzing的杂货铺](https://muzing.top/posts/84a8da1c/)

[one-python-craftsman/15-thinking-in-edge-cases.md at master · piglei/one-python-craftsman](https://github.com/piglei/one-python-craftsman/blob/master/zh_CN/15-thinking-in-edge-cases.md)


    鸭子类型
    接口
    类
    泛型类型
    后期绑定
    前期绑定
    多态
    泛型函数
    向上转型
    向下转型
    is-a
    like-a
    有限状态机


EAFP

    “获得原谅比求许可更容易”的英文缩写。这种 Python 常用代码编写风格会假定所需的键或属性存在，并在假定错误时捕获异常。这种简洁快速风格的特点就是大量运用 try 和 except 语句。于其相对的则是所谓 LBYL 风格，常见于 C 等许多其他语言。



LBYL

    “先查看后跳跃”的英文缩写。这种代码编写风格会在进行调用或查找之前显式地检查前提条件。此风格与 EAFP 方式恰成对比，其特点是大量使用 if 语句。

鸭子类型（duck type）
结构类型（Structural type system）

「接口（Interface）」本质是不那么彻底的「鸭子类型」。我发现了一个可以佐证的论据，Golang 的空接口 `interface {}` 被当作「万能类型」来使用。什么叫万能类型？不就是没有任何要求的鸭子类型嘛。

对于强类型语言（E.g. Java、Go、C#），一般通过「接口」实现「鸭子类型」。

对于弱类型语言（E.g. Python、JS），随便一个变量就是一只鸭子。



替代原则    纯粹替代 is-a 子类只 override 而不添加新成员
is-like-a    is-a 的子集，子类不仅有父类的成员，还自带其他方法
is-a    继承关系
has-a    组合（+委托）关系
前期绑定
后期绑定    运行时才知道要执行具体哪个方法
多态
    代码写的是调用基类的方法，实际运行时是执行子类的 override 方法，
    即代码是「动物跑」，运行是「鸭子跑」「兔子跑」「猫跑」。
    这得益于后期绑定
    多态指运行时的多态，在Java编码上其实就是父类子类或者接口与实现类的关系
    实际程序中更常见的情况是要对不确定是Dog、Cat还是Bird类型的变量调用sayThing方法，这种情况下如果不用多态，就需要使用一串if - else if
向上转型 upcasting
    向底层转型，将子类当成父类来用
    向上转型是安全的，例如Circle是一种Shape类型
向下转型
    向表层转型
    除非确切知道所要处理的对象的类型，否则向下转型几乎是不安全的。
    泛型让向表层转型变得安全



广义上来讲父类、接口、抽象类都是接口，从知识的角度来说，

接口：是对于行为的封装（尤其是JDK8以后融入的scala等函数式编程的思想，有了lamdba表达式）

抽象类：更多的是把相关的代码（共性部分）进行抽离。



有了接口为什么还要abstract class？

1.接口偏向函数式编程的思想，考虑的是行为（动作）的抽象

2.abstract class是抽象类，更多的是面向对象思想，考虑的是数据的封装



从思想来看，类本质是函数封装，接口本质是协议。但 java 实现出来的效果完全不是这样，接口完全变成了一个不具有强制性的类，除了写法有些不同，接口完全可以当类来使。加上类里有个抽象类，类与接口的边界就更加模糊了。

我们知道，有抽象方法的类被称为抽象类，也就意味着抽象类中还能有不是抽象方法的方法。这样的类就不能算作纯粹的接口，尽管它也可以提供接口的功能——只能说抽象类是普通类与接口之间的一种中庸之道。